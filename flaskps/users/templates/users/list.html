{% extends 'base.html' %}
{% block content %}
<div class="container" id="user_list">
  <button type="button" onclick="window.location.href='{{ url_for( 'users.create' ) }}';" class="btn btn-info" >Nuevo Usuario</button>
  <form class="" action="{{ url_for('users.list') }}" method="POST">
    <input type="text" name="username" value="" placeholder="Nombre de usuario">
    <select class="" name="active">
      <option value="" selected>Todos</option>
      <option value="True">Activos</option>
      <option value="False">Inactivos</option>
    </select>
    <input type="submit" name="" value="Buscar" class="btn btn-info">
  </form>
  <table class="table table-hover">
    <thead class="thead-dark">
    <tr>
      <th>#</th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Email</th>
      <th>Nombre de usuario</th>
      <th>Rol</th>
      <th>Activo</th>
      <th>Acciones</th>
    </tr>
    </thead>
    <tbody>
      {% for user in user_list.items %}
        {% if user.active %}
          <tr>
        {% else %}
          <tr class="table-danger">
        {% endif %}
        <td>{{ loop.index }}</td>
        <td>
          <a href="{{ url_for('users.detail', username=user.username) }}">{{ user.name }}</a>
        </td>
        <td>{{ user.surname }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.username}}</td>
        <td>{{ user.rol }}</td>
        <td>{{ user.active }}</td>
        <td><form method="POST" action="{{ url_for('users.delete', user_id=user.id) }}">
            <input type="submit" value="Eliminar">
            </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <br>
  <ul class="pagination center">
    {% if user_list.has_prev %}
      <li class="waves-effect"><a href="{{ url_for('users.list',page=user_list.prev_num) }}"><i class="material-icons">chevron_left</i></a></li>
    {% else %}
      <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
    {% endif %}
    {% for page in user_list.iter_pages() %}
      {% if page %}
        {% if page != user_list.page %}
          <li class=""><a href="{{ url_for('users.list',page=page) }}">{{ page }}</a></li>
        {% else %}
          <li class="active teal darken-3"><a href="#!">{{ page }}</a></li>
        {% endif %}
      {% else %}
        ...
      {% endif %}
    {% endfor %}
    {% if user_list.has_next %}
      <li class="waves-effect"><a href="{{ url_for('users.list',page=user_list.next_num) }}"><i class="material-icons">chevron_right</i></a></li>
    {% else %}
      <li class="disabled"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
    {% endif %}
  </ul>
</div>
<br><br>
{% endblock %}
